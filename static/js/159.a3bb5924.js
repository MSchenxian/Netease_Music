"use strict";(self["webpackChunkmy_index"]=self["webpackChunkmy_index"]||[]).push([[159],{159:function(t,s,e){e.r(s),e.d(s,{default:function(){return C}});var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return t.musicdetails.length>0?e("div",{staticClass:"music-details",class:{bottom:!!t.currentmusic.id}},[e("span",{staticClass:"iconfont icon-fanhui",on:{click:function(s){return s.stopPropagation(),t.$router.back()}}}),e("div",{staticClass:"mark",style:{backgroundImage:"url("+t.musicdetail.coverImgUrl+")"}}),e("div",{staticClass:"music-details-top"},[e("div",{staticClass:"pic"},[e("img",{attrs:{src:t.musicdetail.coverImgUrl,alt:""}}),e("span",[t._v(t._s(t._f("numberto")(t.musicdetail.playCount)))])]),e("div",{staticClass:"music-details-title"},[e("span",{staticClass:"name"},[t._v(t._s(t.musicdetail.name))]),t.musicdetail.creator?e("span",{staticClass:"avatarUrl"},[e("img",{attrs:{src:t.musicdetail.creator.avatarUrl,alt:""}})]):t._e(),t.musicdetail.creator?e("span",{staticClass:"nickname"},[t._v(t._s(t.musicdetail.creator.nickname))]):t._e()])]),e("h5",[t._v("歌曲列表:")]),e("music-item",{attrs:{musicitem:t.showMore,currentmusic:t.currentmusic,currentstate:t.currentstate},on:{play:function(s){return t.$emit("play",s)}}}),t.showMore.length>0?e("div",{ref:"loadmore",staticClass:"loadmore",on:{click:function(s){return s.stopPropagation(),t.more.apply(null,arguments)}}},[t._v(" "+t._s(t.pages>=t.pagesAll?"已经到底了...":"点击加载更多...")+" ")]):t._e(),e("h5",[t._v("精彩评论:")]),e("my-comments",{attrs:{hotComments:t.showComments}}),t.showMore.length>0?e("div",{ref:"loadmore",staticClass:"loadmore",on:{click:function(s){return s.stopPropagation(),t.CommentsMore.apply(null,arguments)}}},[t._v(" "+t._s(t.commentsPages>=t.CommentspagesAll?"已经到底了...":"点击加载更多...")+" ")]):t._e()],1):t._e()},a=[],l=e(598),n=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"my-comments"},[e("ul",t._l(t.hotComments,(function(s){return e("li",{key:s.commentId},[e("img",{attrs:{src:s.user.avatarUrl,alt:""}}),e("div",{staticClass:"right"},[e("div",{staticClass:"top"},[e("span",[t._v(t._s(s.user.nickname))]),e("div",{staticClass:"title"},[e("span",[t._v(t._s(s.likedCount))]),e("span",{staticClass:"iconfont icon-good"})])]),e("div",{staticClass:"time"},[t._v(t._s(t._f("filtersTime")(s.time)))]),e("div",{staticClass:"content"},[t._v(t._s(s.content))])])])})),0)])},o=[],c={props:{hotComments:Array},filters:{filtersTime(t){if(!t)return"";let s=new Date(t),e=s.getFullYear(),i=s.getMonth()+1,a=s.getDate();return e+"年"+i+"月"+a+"日"}}},r=c,m=e(736),u=(0,m.Z)(r,n,o,!1,null,"87ab68be",null),d=u.exports,h={components:{MusicItem:l.Z,MyComments:d},props:{id:{},currentmusic:{type:Object,default:()=>null},currentstate:{type:Boolean,default:!0}},data(){return{musicdetail:[],musicdetails:[],pages:1,commentsPages:1,hotComments:[]}},created(){this.getMusicDetails(),this.getImg(),this.getComments(),console.log(this.id)},methods:{async getMusicDetails(){await this.axios.get(`/playlist/track/all?id=${this.id}`).then((t=>{console.log(t),this.musicdetails=t.songs.map(((t,s)=>(t.song={album:t.al,alias:t.alia,artists:t.ar,i:s+1<10?"0"+(s+1):s+1},t)))}))},async getImg(){await this.axios.get(`/playlist/detail?id=${this.id}`).then((t=>{console.log(t),this.musicdetail=t.playlist}))},more(){this.pages++},getComments(){this.axios.get(`/comment/playlist?id=${this.id}`).then((t=>{console.log(t),this.hotComments=t.hotComments}))},CommentsMore(){this.commentsPages++}},computed:{showMore(){let t=10*this.pages;return this.musicdetails.slice(0,t)},pagesAll(){return this.musicdetails.length/10},showComments(){let t=5*this.commentsPages;return this.hotComments.slice(0,t)},CommentspagesAll(){return this.hotComments.length/5}}},p=h,g=(0,m.Z)(p,i,a,!1,null,"223b8bf8",null),C=g.exports}}]);
//# sourceMappingURL=159.a3bb5924.js.map