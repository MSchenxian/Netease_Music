{"version":3,"file":"static/js/971-legacy.bddcc726.js","mappings":"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","sources":["webpack://my_index/./src/views/SongList.vue?324a","webpack://my_index/src/views/SongList.vue","webpack://my_index/./src/views/SongList.vue?d278","webpack://my_index/./src/views/SongList.vue","webpack://my_index/./node_modules/core-js/internals/array-for-each.js","webpack://my_index/./node_modules/core-js/internals/array-method-is-strict.js","webpack://my_index/./node_modules/core-js/modules/web.dom-collections.for-each.js"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"song-list\"},[(_vm.songdetails.length > 0)?_c('div',[_c('span',{staticClass:\"iconfont icon-fanhui\",on:{\"click\":function($event){$event.stopPropagation();return _vm.$router.back()}}}),_c('div',{staticClass:\"song-list-top\"},[_c('div',{staticClass:\"pic\",style:({ backgroundImage: (\"url(\" + (this.songdetail.coverImgUrl) + \")\") })}),_c('span',{staticClass:\"date\"},[_vm._v(\"更新日期:\"+_vm._s(_vm._f(\"datato\")(_vm.songdetail.updateTime)))])])]):_vm._e(),(_vm.songdetails.length < 1)?_c('load-animation',{staticClass:\"load-animation\"}):_c('music-item',{attrs:{\"musicitem\":_vm.showmore,\"currentmusic\":_vm.currentmusic,\"currentstate\":_vm.currentstate},on:{\"play\":function($event){return _vm.$emit('play',$event)}}}),(_vm.showmore.length > 0)?_c('div',{ref:\"loadmore\",staticClass:\"loadmore\",on:{\"click\":function($event){$event.stopPropagation();return _vm.more.apply(null, arguments)}}},[_vm._v(\" \"+_vm._s(_vm.pages >= _vm.pagesAll ? \"已经到底了...\" : \"点击加载更多...\")+\" \")]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"song-list\">\r\n    <div v-if=\"songdetails.length > 0\">\r\n      <span class=\"iconfont icon-fanhui\" @click.stop=\"$router.back()\"></span>\r\n      <div class=\"song-list-top\">\r\n        <div\r\n          class=\"pic\"\r\n          :style=\"{ backgroundImage: `url(${this.songdetail.coverImgUrl})` }\"\r\n        ></div>\r\n        <span class=\"date\">更新日期:{{ songdetail.updateTime | datato }}</span>\r\n      </div>\r\n    </div>\r\n    <load-animation\r\n      class=\"load-animation\"\r\n      v-if=\"songdetails.length < 1\"\r\n    ></load-animation>\r\n    <music-item :musicitem=\"showmore\" v-else\r\n      @play=\"$emit('play',$event)\"\r\n      :currentmusic=\"currentmusic\"\r\n      :currentstate=\"currentstate\"\r\n    ></music-item>\r\n    <div\r\n      v-if=\"showmore.length > 0\"\r\n      class=\"loadmore\"\r\n      ref=\"loadmore\"\r\n      @click.stop=\"more\"\r\n    >\r\n      {{ pages >= pagesAll ? \"已经到底了...\" : \"点击加载更多...\" }}\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport MusicItem from \"../components/MusicItem.vue\";\r\nexport default {\r\n  props:{\r\n    currentmusic:{\r\n      type:Object,\r\n      default:()=>{return null}\r\n    },\r\n    currentstate:{\r\n      type:Boolean,\r\n      default:true\r\n    }\r\n  },\r\n  components: { MusicItem },\r\n  data() {\r\n    return {\r\n      songdetail: [],\r\n      songdetails: [],\r\n      songdetailed: [],\r\n      pages: 1,\r\n    };\r\n  },\r\n  created() {\r\n    this.getPlayList();\r\n  },\r\n async mounted() {\r\n    await this.getPlayList();\r\n    // this.$refs.pic.style.backgroundImage = `url(${this.songdetail.coverImgUrl})`;\r\n     window.addEventListener(\"scroll\",this.scrollTop);\r\n  },\r\n  // beforeRouteLeave(to,from,next){\r\n  //    window.removeEventListener(\"scroll\",this.scrollTop);  \r\n  //    next();\r\n  // },\r\n  destroyed(){\r\n     window.removeEventListener(\"scroll\",this.scrollTop);  \r\n  },\r\n  methods: {\r\n    async getPlayList() {\r\n      const res = await this.axios.get(\r\n        \"/playlist/detail?id=\" + this.$route.query.id);\r\n      console.log(res);\r\n      this.songdetail = res.playlist;\r\n      this.songdetailed = res.privileges;\r\n\r\n      this.songdetails = res.playlist.tracks.map((item, index) => {\r\n        item.song = { \r\n          album: item.al,\r\n          alias: item.alia,\r\n          artists: item.ar,\r\n          i: index + 1 < 10 ? \"0\" + (index + 1) : index + 1,\r\n        };\r\n        return item;\r\n      });\r\n\r\n      this.songdetails.forEach((item, index) => {\r\n        if (item.id == this.songdetailed[index].id) {\r\n          return (item.song.privilege = {\r\n            maxbr: this.songdetailed[index].maxbr,\r\n          });\r\n        }\r\n      });\r\n    },\r\n    more() {\r\n      this.pages++;\r\n    },\r\n    scrollTop(){\r\n      // 滚动scroll,卷去的距离\r\n      let scrollTop = document.documentElement.scrollTop || document.body.scrollTop;\r\n      // 加载更多...元素距离最顶部的距离\r\n      let loadmoreOffsetTop = this.$refs.loadmore.offsetTop;\r\n      // 可视化窗口高度\r\n      let clientHeight = window.innerHeight;\r\n      // console.log(\"卷去的距离scrollTop=>\",scrollTop,\"元素距离最顶部的距离loadmoreOffsetTop=>\",loadmoreOffsetTop,\r\n      // \"可视化窗口高度clientHeight=>\",clientHeight)\r\n      // 卷去的距离scrollTop=> 2137.60009765625 \r\n      // 元素距离最顶部的距离loadmoreOffsetTop=> 2765\r\n      // 可视化窗口高度clientHeight=> 667\r\n      // //判断触底 if(scrollTop + clientHeight >= loadmoreOffsetTop + 误差)\r\n      if(scrollTop + clientHeight >= loadmoreOffsetTop + 30){\r\n        this.pages++;\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    showmore() {\r\n      let end = this.pages * 20;\r\n      return this.songdetails.slice(0, end);\r\n    },\r\n    pagesAll() {\r\n      return this.songdetails.length / 20;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.song-list {\r\n  padding-bottom: 60px;\r\n  position: relative;\r\n  .icon-fanhui {\r\n    position: absolute;\r\n    top: 8px;\r\n    left: 10px;\r\n    font-size: 22px;\r\n    color: white;\r\n    z-index: 2;\r\n  }\r\n  .song-list-top {\r\n    width: 100vw;\r\n    height: 165px;\r\n    position: relative;\r\n    .pic {\r\n      height: 160px;\r\n      background-repeat: no-repeat;\r\n      background-size: cover;\r\n      background-position: center center;\r\n    }\r\n    .date {\r\n      color: white;\r\n      font-size: 12px;\r\n      position: absolute;\r\n      left: 4px;\r\n      bottom: 9px;\r\n    }\r\n  }\r\n  .load-animation {\r\n    padding-top: 20px;\r\n  }\r\n  .loadmore {\r\n    text-align: center;\r\n    height: 40px;\r\n    font-size: 14px;\r\n    line-height: 40px;\r\n  }\r\n}\r\n</style>","import mod from \"-!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[0]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SongList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[0]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SongList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SongList.vue?vue&type=template&id=3a0eee6b&scoped=true&\"\nimport script from \"./SongList.vue?vue&type=script&lang=js&\"\nexport * from \"./SongList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SongList.vue?vue&type=style&index=0&id=3a0eee6b&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3a0eee6b\",\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $forEach = require('../internals/array-iteration').forEach;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\n\nvar STRICT_METHOD = arrayMethodIsStrict('forEach');\n\n// `Array.prototype.forEach` method implementation\n// https://tc39.es/ecma262/#sec-array.prototype.foreach\nmodule.exports = !STRICT_METHOD ? function forEach(callbackfn /* , thisArg */) {\n  return $forEach(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n// eslint-disable-next-line es-x/no-array-prototype-foreach -- safe\n} : [].forEach;\n","'use strict';\nvar fails = require('../internals/fails');\n\nmodule.exports = function (METHOD_NAME, argument) {\n  var method = [][METHOD_NAME];\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call -- required for testing\n    method.call(null, argument || function () { return 1; }, 1);\n  });\n};\n","var global = require('../internals/global');\nvar DOMIterables = require('../internals/dom-iterables');\nvar DOMTokenListPrototype = require('../internals/dom-token-list-prototype');\nvar forEach = require('../internals/array-for-each');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\n\nvar handlePrototype = function (CollectionPrototype) {\n  // some Chrome versions have non-configurable methods on DOMTokenList\n  if (CollectionPrototype && CollectionPrototype.forEach !== forEach) try {\n    createNonEnumerableProperty(CollectionPrototype, 'forEach', forEach);\n  } catch (error) {\n    CollectionPrototype.forEach = forEach;\n  }\n};\n\nfor (var COLLECTION_NAME in DOMIterables) {\n  if (DOMIterables[COLLECTION_NAME]) {\n    handlePrototype(global[COLLECTION_NAME] && global[COLLECTION_NAME].prototype);\n  }\n}\n\nhandlePrototype(DOMTokenListPrototype);\n"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","songdetails","length","on","$event","stopPropagation","$router","back","style","backgroundImage","songdetail","_v","_s","_f","updateTime","_e","attrs","showmore","currentmusic","currentstate","$emit","ref","more","apply","arguments","pages","pagesAll","staticRenderFns","props","type","default","components","MusicItem","data","songdetailed","created","getPlayList","mounted","window","destroyed","methods","res","console","item","album","alias","artists","i","maxbr","scrollTop","computed","slice","end","component","$forEach","arrayMethodIsStrict","STRICT_METHOD","module","exports","forEach","callbackfn","undefined","fails","METHOD_NAME","argument","method","call","global","DOMIterables","DOMTokenListPrototype","createNonEnumerableProperty","handlePrototype","CollectionPrototype","error","COLLECTION_NAME","prototype"],"sourceRoot":""}