"use strict";(self["webpackChunkmy_index"]=self["webpackChunkmy_index"]||[]).push([[159],{7159:function(t,e,s){s.r(e),s.d(e,{default:function(){return v}});var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.musicdetails.length>0?s("div",{staticClass:"music-details",class:{bottom:!!t.currentmusic.id}},[s("span",{staticClass:"iconfont icon-fanhui",on:{click:function(e){return e.stopPropagation(),t.$router.back()}}}),s("div",{staticClass:"mark",style:{backgroundImage:"url("+t.musicdetail.coverImgUrl+")"}}),s("div",{staticClass:"music-details-top"},[s("div",{staticClass:"pic"},[s("img",{attrs:{src:t.musicdetail.coverImgUrl,alt:""}}),s("span",[t._v(t._s(t._f("numberto")(t.musicdetail.playCount)))])]),s("div",{staticClass:"music-details-title"},[s("span",{staticClass:"name"},[t._v(t._s(t.musicdetail.name))]),t.musicdetail.creator?s("span",{staticClass:"avatarUrl"},[s("img",{attrs:{src:t.musicdetail.creator.avatarUrl,alt:""}})]):t._e(),t.musicdetail.creator?s("span",{staticClass:"nickname"},[t._v(t._s(t.musicdetail.creator.nickname))]):t._e()])]),s("h5",[t._v("歌曲列表:")]),s("music-item",{attrs:{musicitem:t.showMore,currentmusic:t.currentmusic,currentstate:t.currentstate},on:{play:function(e){return t.$emit("play",e)}}}),t.showMore.length>0?s("div",{ref:"loadmore",staticClass:"loadmore",on:{click:function(e){return e.stopPropagation(),t.more.apply(null,arguments)}}},[t._v(" "+t._s(t.pages>=t.pagesAll?"已经到底了...":"点击加载更多...")+" ")]):t._e(),s("h5",[t._v("精彩评论:")]),s("my-comments",{attrs:{hotComments:t.showComments}}),t.showMore.length>0?s("div",{ref:"loadmore",staticClass:"loadmore",on:{click:function(e){return e.stopPropagation(),t.CommentsMore.apply(null,arguments)}}},[t._v(" "+t._s(t.commentsPages>=t.CommentspagesAll?"已经到底了...":"点击加载更多...")+" ")]):t._e()],1):t._e()},i=[],a=s(9873),r=(s(5666),s(1249),s(7042),s(9598)),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"my-comments"},[s("ul",t._l(t.hotComments,(function(e){return s("li",{key:e.commentId},[s("img",{attrs:{src:e.user.avatarUrl,alt:""}}),s("div",{staticClass:"right"},[s("div",{staticClass:"top"},[s("span",[t._v(t._s(e.user.nickname))]),s("div",{staticClass:"title"},[s("span",[t._v(t._s(e.likedCount))]),s("span",{staticClass:"iconfont icon-good"})])]),s("div",{staticClass:"time"},[t._v(t._s(t._f("filtersTime")(e.time)))]),s("div",{staticClass:"content"},[t._v(t._s(e.content))])])])})),0)])},c=[],l={props:{hotComments:Array},filters:{filtersTime:function(t){if(!t)return"";var e=new Date(t),s=e.getFullYear(),n=e.getMonth()+1,i=e.getDate();return s+"年"+n+"月"+i+"日"}}},m=l,u=s(3736),d=(0,u.Z)(m,o,c,!1,null,"87ab68be",null),p=d.exports,h={components:{MusicItem:r.Z,MyComments:p},props:{id:{},currentmusic:{type:Object,default:function(){return null}},currentstate:{type:Boolean,default:!0}},data:function(){return{musicdetail:[],musicdetails:[],pages:1,commentsPages:1,hotComments:[]}},created:function(){this.getMusicDetails(),this.getImg(),this.getComments(),console.log(this.id)},methods:{getMusicDetails:function(){var t=this;return(0,a.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.axios.get("/playlist/track/all?id=".concat(t.id)).then((function(e){console.log(e),t.musicdetails=e.songs.map((function(t,e){return t.song={album:t.al,alias:t.alia,artists:t.ar,i:e+1<10?"0"+(e+1):e+1},t}))}));case 2:case"end":return e.stop()}}),e)})))()},getImg:function(){var t=this;return(0,a.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.axios.get("/playlist/detail?id=".concat(t.id)).then((function(e){console.log(e),t.musicdetail=e.playlist}));case 2:case"end":return e.stop()}}),e)})))()},more:function(){this.pages++},getComments:function(){var t=this;this.axios.get("/comment/playlist?id=".concat(this.id)).then((function(e){console.log(e),t.hotComments=e.hotComments}))},CommentsMore:function(){this.commentsPages++}},computed:{showMore:function(){var t=10*this.pages;return this.musicdetails.slice(0,t)},pagesAll:function(){return this.musicdetails.length/10},showComments:function(){var t=5*this.commentsPages;return this.hotComments.slice(0,t)},CommentspagesAll:function(){return this.hotComments.length/5}}},g=h,f=(0,u.Z)(g,n,i,!1,null,"223b8bf8",null),v=f.exports}}]);
//# sourceMappingURL=159-legacy.78dfe7cb.js.map