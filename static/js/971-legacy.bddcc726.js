(self["webpackChunkmy_index"]=self["webpackChunkmy_index"]||[]).push([[971],{6971:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return d}});var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"song-list"},[t.songdetails.length>0?n("div",[n("span",{staticClass:"iconfont icon-fanhui",on:{click:function(e){return e.stopPropagation(),t.$router.back()}}}),n("div",{staticClass:"song-list-top"},[n("div",{staticClass:"pic",style:{backgroundImage:"url("+this.songdetail.coverImgUrl+")"}}),n("span",{staticClass:"date"},[t._v("更新日期:"+t._s(t._f("datato")(t.songdetail.updateTime)))])])]):t._e(),t.songdetails.length<1?n("load-animation",{staticClass:"load-animation"}):n("music-item",{attrs:{musicitem:t.showmore,currentmusic:t.currentmusic,currentstate:t.currentstate},on:{play:function(e){return t.$emit("play",e)}}}),t.showmore.length>0?n("div",{ref:"loadmore",staticClass:"loadmore",on:{click:function(e){return e.stopPropagation(),t.more.apply(null,arguments)}}},[t._v(" "+t._s(t.pages>=t.pagesAll?"已经到底了...":"点击加载更多...")+" ")]):t._e()],1)},s=[],o=n(9873),i=(n(1249),n(1539),n(4747),n(7042),n(5666),n(9598)),a={props:{currentmusic:{type:Object,default:function(){return null}},currentstate:{type:Boolean,default:!0}},components:{MusicItem:i.Z},data:function(){return{songdetail:[],songdetails:[],songdetailed:[],pages:1}},created:function(){this.getPlayList()},mounted:function(){var t=this;return(0,o.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getPlayList();case 2:window.addEventListener("scroll",t.scrollTop);case 3:case"end":return e.stop()}}),e)})))()},destroyed:function(){window.removeEventListener("scroll",this.scrollTop)},methods:{getPlayList:function(){var t=this;return(0,o.Z)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.axios.get("/playlist/detail?id="+t.$route.query.id);case 2:n=e.sent,console.log(n),t.songdetail=n.playlist,t.songdetailed=n.privileges,t.songdetails=n.playlist.tracks.map((function(t,e){return t.song={album:t.al,alias:t.alia,artists:t.ar,i:e+1<10?"0"+(e+1):e+1},t})),t.songdetails.forEach((function(e,n){if(e.id==t.songdetailed[n].id)return e.song.privilege={maxbr:t.songdetailed[n].maxbr}}));case 8:case"end":return e.stop()}}),e)})))()},more:function(){this.pages++},scrollTop:function(){var t=document.documentElement.scrollTop||document.body.scrollTop,e=this.$refs.loadmore.offsetTop,n=window.innerHeight;t+n>=e+30&&this.pages++}},computed:{showmore:function(){var t=20*this.pages;return this.songdetails.slice(0,t)},pagesAll:function(){return this.songdetails.length/20}}},c=a,l=n(3736),u=(0,l.Z)(c,r,s,!1,null,"3a0eee6b",null),d=u.exports},8533:function(t,e,n){"use strict";var r=n(2092).forEach,s=n(9341),o=s("forEach");t.exports=o?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},9341:function(t,e,n){"use strict";var r=n(7293);t.exports=function(t,e){var n=[][t];return!!n&&r((function(){n.call(null,e||function(){return 1},1)}))}},4747:function(t,e,n){var r=n(7854),s=n(8324),o=n(8509),i=n(8533),a=n(8880),c=function(t){if(t&&t.forEach!==i)try{a(t,"forEach",i)}catch(e){t.forEach=i}};for(var l in s)s[l]&&c(r[l]&&r[l].prototype);c(o)}}]);
//# sourceMappingURL=971-legacy.bddcc726.js.map