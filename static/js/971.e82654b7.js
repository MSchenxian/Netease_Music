"use strict";(self["webpackChunkmy_index"]=self["webpackChunkmy_index"]||[]).push([[971],{971:function(t,s,e){e.r(s),e.d(s,{default:function(){return d}});var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"song-list"},[t.songdetails.length>0?e("div",[e("span",{staticClass:"iconfont icon-fanhui",on:{click:function(s){return s.stopPropagation(),t.$router.back()}}}),e("div",{staticClass:"song-list-top"},[e("div",{staticClass:"pic",style:{backgroundImage:"url("+this.songdetail.coverImgUrl+")"}}),e("span",{staticClass:"date"},[t._v("更新日期:"+t._s(t._f("datato")(t.songdetail.updateTime)))])])]):t._e(),t.songdetails.length<1?e("load-animation",{staticClass:"load-animation"}):e("music-item",{attrs:{musicitem:t.showmore,currentmusic:t.currentmusic,currentstate:t.currentstate},on:{play:function(s){return t.$emit("play",s)}}}),t.showmore.length>0?e("div",{ref:"loadmore",staticClass:"loadmore",on:{click:function(s){return s.stopPropagation(),t.more.apply(null,arguments)}}},[t._v(" "+t._s(t.pages>=t.pagesAll?"已经到底了...":"点击加载更多...")+" ")]):t._e()],1)},a=[],o=e(598),l={props:{currentmusic:{type:Object,default:()=>null},currentstate:{type:Boolean,default:!0}},components:{MusicItem:o.Z},data(){return{songdetail:[],songdetails:[],songdetailed:[],pages:1}},created(){this.getPlayList()},async mounted(){await this.getPlayList(),window.addEventListener("scroll",this.scrollTop)},destroyed(){window.removeEventListener("scroll",this.scrollTop)},methods:{async getPlayList(){const t=await this.axios.get("/playlist/detail?id="+this.$route.query.id);console.log(t),this.songdetail=t.playlist,this.songdetailed=t.privileges,this.songdetails=t.playlist.tracks.map(((t,s)=>(t.song={album:t.al,alias:t.alia,artists:t.ar,i:s+1<10?"0"+(s+1):s+1},t))),this.songdetails.forEach(((t,s)=>{if(t.id==this.songdetailed[s].id)return t.song.privilege={maxbr:this.songdetailed[s].maxbr}}))},more(){this.pages++},scrollTop(){let t=document.documentElement.scrollTop||document.body.scrollTop,s=this.$refs.loadmore.offsetTop,e=window.innerHeight;t+e>=s+30&&this.pages++}},computed:{showmore(){let t=20*this.pages;return this.songdetails.slice(0,t)},pagesAll(){return this.songdetails.length/20}}},n=l,r=e(736),c=(0,r.Z)(n,i,a,!1,null,"3a0eee6b",null),d=c.exports}}]);
//# sourceMappingURL=971.e82654b7.js.map